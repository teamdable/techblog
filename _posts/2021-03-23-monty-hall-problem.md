---
layout: post
title: "몬티홀 딜레마와 표본공간"
date: 2021-03-23 00:00:00 +0900
author: Seonghwan Hong
tags: [ 홍성환, 확률 ]
---

조건부확률, 베이지정리, 몬티홀 딜레마에 대한 사전지식이 필요하다.

## 0. 확률과 사건

표본공간에서 정의된 부분 집합을 사건이라고 부르며 사건의 확률은 사건의 원소들에 부여된 확률을 합하여 계산 할 수 있다. 즉 어떤 사건 E에 대한 확률은 다음과 같이 계산될 수 있다. 

$P(E) = \sum_{e \in E} P(\{e\})$  

참고로 사건의 원소 개수를 표본 공간의 원소 개수로 나눠 확률을 구하는 방식은 등확률 공간에서만 적용되는 매우 한정적인 방식이다.


## 1. 조건부 확률

조건부 확률은 $P(A\|B) = P(A \bigcap B)/P(B)$ 로 정의된다. 조건부 확률  $P(A\|B)$ 을 알고 있음으로 우리는 집합 $B$와 집합 $A$에 대한 명확한 정의를 내린 상태이며 따라서 어떤 표본이 주어졌을 때 그 표본이 집합 $B$또는 집합 $A \bigcap B$의 원소인지 판단할 수 있어야 한다. 또한, 특수한 경우가 아니라면 각 집합의 원소를 나열할 수 있어야 한다.


## 2. 몬티홀 딜레마 문제

3개의 문이 존재하고 1개의 문에는 자동차가 또 다른 2개의 문에는 염소가 있다. 참여자인 데이불은 1번 문을 골랐다. 그 뒤 어느 문에 자동차와 염소가 있는 지 알고 있는 사회자가 염소가 있는 문 3번을 열어주었다. 1번 문에 자동차가 있을 확률과 2번 문에 자동차가 있을 확률은 어떻게 될까?  위 문제에 대한 일반적인 해답은 베이즈룰을 쓰는 아래와 같은 방식이다. 

참여자가 무조건 1번 문을 고른다고 가정하자. 이때 사회자가 2번 문을 열어 염소가 있는 문을 보여주는 사건을 E2, 3번 문을 열어 염소가 있는 문을 보여줄 사건을 E3, 1번 문에 자동차가 있는 사건을 C1, 2번 문에 자동차가 있는 사건을 C2, 3번 문에 자동차가 있는 사건을 C3라고 하자.

- 이때 `P(E2|C1) = 1/2`, `P(E3|C1) = 1/2` 이다. 참여자가 1번 문을 선택했을 때 두 문의 위상(두 문에 염소 모두 존재)이 같기 때문에 사회자가 문을 선택할 확률이 같아야 하기 때문이다.
- `P(E2|C2) = 0`, `P(E3|C2) = 1` 이다. 차가 2번 문에 있었다면, 사회자는 염소를 보여주기 위해 3번 문 문을 선택할 수밖에 없다. 마찬가지로 `P(E2|C3) = 1`, `P(E3|C3) = 0` 이다.
- 각 문에 자동차가 있을 확률이 동일하므로 `P(C3) = P(C2) = P(C1) = 1/3` 이다 

위에서 구한 조건부 확률과 베이즈 정리를 적용하여 데이불이 1번 문을 고른 후 사회자가 3번 문을 골랐을 때 차가 2번에 있을 확률(`선택바꾸기`)과 차가 1번 문에 있을 확률(`선택 유지`)을 구하면 다음과 같다.

$$P(C2|E3) = P(E3|C2)P(C2) /(P(E3|C1)P(C1) + P(E3|C2)P(C2) + P(E3|C3)P(C3)) = 2/3$$

$$P(C1|E3) = P(E3|C1)P(C1) /(P(E3|C1)P(C1) + P(E3|C2)P(C2) + P(E3|C3)P(C3)) = 1/3$$


## 3. 표본공간과 사건

위 풀이를 이해했다면, 우리는 표본공간을 제시하고 E3, C1, C2, C3 각각의 사건에 대해 어떤 표본이 들어 있는 지 나열할 수 있어야 한다. 앞서 설명했듯이 각각의 사건은 표본들의 집합이기 때문이다. 아래 글을 읽기 전에 몬티홀 딜레마의 표본공간에 대해 생각해보고 읽어보면 좋을 것 같다.

#### 3.1 몬티홀 딜레마의 표본공간

- 위 풀이에서는 `(자동차가 있는 문의 위치, 사회자가 고른 문의 위치)`의 모든 순서 쌍을 표본공간으로 생각해 볼 수 있다. 즉 (1, 1), (1,2), (1,3) .... (3,3)이 표본공간이다.

    - $$S = \{(1,1), (1,2),(1,3), (2,1), (2,2),(2,3),(3,1), (3,2),(3,3),\}$$

#### 3.2 몬티홀 딜레마의 시건

- 그렇다면 C1은 어떻게 표현될 수 있을까?  1번 문에 자동차가 있을 경우를 모두 세기만 하면 된다. 따라서 C1은 다음 순서쌍들이 된다

    - $$C1 = \{(1,1), (1,2),(1,3)\}$$


## 4. 조건부 확률 정의만으로 몬티홀 딜레마 확률 구하기

상식적으로 생각해 볼때 우리는 다음과 같은 가정을 할 수 있다. 이 가정은 거의 모든 몬티홀 딜레마 풀이가 의존하고 있는 가정이다. 

- 가정 1: 각각 3개의 문에 자동차가 있을 확률은 같다. 즉 어떤 문에 자동차가 있을 확률은 1/3 이다.
- 가정 2: 사회자는 고를 수 있는 문이 2개가 있을 때 각 문을 선택할 확률이 같다. 즉 데이불이 차가 있는 문을 선택했다면, 사회자가 어떤 문을 선택할 확률은 1/2 이다.

이러한 가정에 따라 각 문에 자동차가 있을 확률이 동일하게 만들고 또 사회자가 문을 고를 확률을 동일하게 만들면 아래 처럼 표본에 확률을 부여할 수밖에 없다.

$P(\{(2,1)\}) = 0$, 사회자는 데이불이 찍은 문을 열지 않는다

$P(\{(2,2)\}) = 0$, 사회자는 자동차의 위치를 알려주지 않는다.

$P(\{(2,3)\}) = 1/3$, 2번문을 고를 경우는 표본 (2,3)밖에 없고 2번문을 고를 확률은 1/3이어야 한다.

$P(\{(3,1)\}) = 0$, 사회자는 데이불이 찍은 문을 열지 않는다

$P(\{(3,2)\}) = 1/3$, 3번문을 고를 경우는 표본 (3,2)밖에 없고 3번문을 고를 확률은 1/3이어야 한다.

$P(\{(3,3)\}) = 0$, 사회자는 자동차의 위치를 알려주지 않는다.

$P(\{(1,1)\}) = 0$, 사회자는 자동차의 위치를 알려주지 않는다.

$P(\{(1,2)\}) = 1/6$,  1번문을 고를 경우는 2가지 경우인데 각 경우의 확률이 가정 2번에 따라 같다.

$P(\{(1,3)\}) = 1/6$,  1번문을 고를 경우는 2가지 경우인데 각 경우의 확률이 가정 2번에 따라 같다.

- 각 표본에 대한 확률을 구했으니 $P(C1\|E3)$와 $P(C2\|E3)$을 조건부 확률의 정의를 활용하여 구할 수 있다.

## 5. 결론

몬티홀 딜레마를 베이즈 정리로 풀어보고 풀이 과정에서 정의한 사건들의 표본들에 대해 나열해봤다. 확률론을 처음 공부할 때 많은 경우 가장 기본이 되는 표본공간과 사건에 대해 명확히 이해를 못 하고 넘어가는 경우가 많다. 몬티홀 딜레마 문제를 베이즈 정리로 풀어본 적이 있음에도 표본공간을 생각해내지 못 했다면, 표본공간에 대해 생각해보는 습관을 가져보는 것이 어떨까?
